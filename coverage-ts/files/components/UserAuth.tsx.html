
  <!DOCTYPE html>
  <html>
    <head>
      <title>UserAuth.tsx</title>
      <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" type="text/css" rel="stylesheet">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/mode/javascript/javascript.min.js" type="text/javascript" charset="utf-8"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.css" type="text/css" rel="stylesheet">
<script src="../../assets/source-file.js" type="text/javascript" charset="utf-8"></script>
<link href="../../assets/source-file.css" type="text/css" rel="stylesheet">
    </head>
    <body>
    <div style="margin-top:3em" class="ui container"><h1 class="ui header"><a href="../../index.html">TypeScript coverage report</a></h1><table style="margin-top:2em" class="ui celled table"><thead class=""><tr class=""><th class="">Filename</th><th class="">Percent</th><th class="">Threshold</th><th class="">Total</th><th class="">Covered</th><th class="">Uncovered</th></tr></thead><tbody class=""><tr class="positive"><td class="">components/UserAuth.tsx</td><td class="">100.00%</td><td class="">80%</td><td class="">175</td><td class="">175</td><td class="">0</td></tr></tbody></table><textarea id="editor" readonly="" style="margin-top:3em">import React, { ChangeEvent, useState } from &quot;react&quot;;
import { useAppDispatch } from &quot;../hooks/hooks&quot;;
import { handleShowSignIn } from &quot;../redux/features/componentHandlingSlice&quot;;
import { handleIsLoggedIn } from &quot;../redux/features/userSlice&quot;;
import style from &quot;../styles/UserAuth.module.css&quot;;
import { signIn, signUp, updateUsername } from &quot;../utils/auth&quot;;

function UserAuth() {
  const dispatch = useAppDispatch();
  const [email, setEmail] = useState(&quot;&quot;);
  const [password, setPassword] = useState(&quot;&quot;);
  const [username, setUsername] = useState(&quot;&quot;);
  const [tab, setTab] = useState(&quot;signIn&quot;);
  const [errorMsg, setErrorMsg] = useState&lt;string | null&gt;(null);

  function handleOnChange(e: ChangeEvent&lt;HTMLInputElement&gt;) {
    if (e.target.name === &quot;email&quot;) {
      setEmail(e.target.value);
    } else if (e.target.name === &quot;password&quot;) {
      setPassword(e.target.value);
    } else if (e.target.name === &quot;username&quot;) {
      setUsername(e.target.value);
    }
  }

  async function handleSubmit(
    email: string,
    password: string,
    username: string
  ) {
    if (tab === &quot;signIn&quot;) {
      const signInResponse = await signIn(email, password);

      if (signInResponse.success) {
        dispatch(handleShowSignIn(false));
        dispatch(handleIsLoggedIn(true));
      } else {
        setErrorMsg(signInResponse.error);
      }
    } else if (tab === &quot;signUp&quot;) {
      if (!username) {
        setErrorMsg(&quot;Choose a username&quot;);
        return;
      }
      const signUpResponse = await signUp(email, password);

      if (signUpResponse.user) {
        const updateUsernameResponse = await updateUsername(
          username,
          signUpResponse.user.id
        );

        if (updateUsernameResponse.data) {
          dispatch(handleShowSignIn(false));
          dispatch(handleIsLoggedIn(true));
        } else {
          setErrorMsg(updateUsernameResponse.error?.message);
        }
      } else {
        setErrorMsg(signUpResponse.error);
      }
    }
  }

  function emptyInputs() {
    setEmail(&quot;&quot;);
    setPassword(&quot;&quot;);
    setUsername(&quot;&quot;);
  }

  return (
    &lt;div className={style.container}&gt;
      &lt;section className={style.tabs}&gt;
        &lt;button
          className={tab === &quot;signIn&quot; ? style.active : &quot;&quot;}
          onClick={() =&gt; {
            setTab(&quot;signIn&quot;);
            emptyInputs();
          }}
        &gt;
          Sign in
        &lt;/button&gt;
        &lt;div className={style.divider}&gt;&lt;/div&gt;
        &lt;button
          className={tab === &quot;signUp&quot; ? style.active : &quot;&quot;}
          onClick={() =&gt; {
            setTab(&quot;signUp&quot;);
            emptyInputs();
          }}
        &gt;
          Sign up
        &lt;/button&gt;
      &lt;/section&gt;
      {tab === &quot;signUp&quot; &amp;&amp; (
        &lt;input
          name=&quot;username&quot;
          type=&quot;text&quot;
          placeholder=&quot;Username&quot;
          onChange={handleOnChange}
          value={username}
        /&gt;
      )}
      &lt;input
        name=&quot;email&quot;
        type=&quot;email&quot;
        placeholder=&quot;Email&quot;
        onChange={handleOnChange}
        value={email}
      /&gt;
      &lt;input
        type=&quot;password&quot;
        name=&quot;password&quot;
        placeholder=&quot;Password&quot;
        onChange={handleOnChange}
        value={password}
      /&gt;
      &lt;input
        type=&quot;submit&quot;
        value={tab === &quot;signIn&quot; ? &quot;Sign in&quot; : &quot;Sign up&quot;}
        onClick={() =&gt; handleSubmit(email, password, username)}
      /&gt;
      {errorMsg &amp;&amp; &lt;p&gt;{errorMsg}&lt;/p&gt;}
    &lt;/div&gt;
  );
}

export default UserAuth;
</textarea><pre id="annotations" style="display:none">[]</pre></div>
    <p class="footer-text">TypeScript Coverage Report generated by <a href="https://github.com/plantain-00/type-coverage">type-coverage</a> and <a href="https://github.com/alexcanessa/typescript-coverage-report">typescript-coverage-report</a> at Fri, 30 Sep 2022 18:16:27 GMT</p>
    </body>
  </html>
  